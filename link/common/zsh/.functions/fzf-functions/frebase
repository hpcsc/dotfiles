TARGET_BRANCH=$(git branch | grep -v '^*' | sed -e 's/^[[:space:]]*//' | fzf)

# assume remote name is origin, remote branch has the same name with local branch
git fetch origin ${TARGET_BRANCH}:${TARGET_BRANCH}
echo "=== Fetched latest for origin/${TARGET_BRANCH}"

git rebase ${TARGET_BRANCH}
echo "=== Rebased $(git rev-parse --abbrev-ref HEAD) to ${TARGET_BRANCH}"
